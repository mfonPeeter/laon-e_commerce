"use strict";(self.webpackChunklaon_e_commerce=self.webpackChunklaon_e_commerce||[]).push([[42],{6042:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var r=s(4165),n=s(5861),a=s(885),i=s(2791),c=s(7689),l=s(1087),o=s(4324),u=s(7835),d=s(1413),m=s(3896),p=s(184),x=function(e){var t=e.placeholder,s=e.registeredText,r=e.required,n=e.value,a=e.message,c=(0,m.Gc)().register;return(0,p.jsx)(i.Fragment,{children:(0,p.jsx)("input",(0,d.Z)((0,d.Z)({type:"text",defaultValue:"",placeholder:t},c("".concat(s),{required:r,pattern:{value:n,message:a}})),{},{className:"w-full text-lg border-b border-gray-500 outline-none transition-all placeholder-gray-500 hover:border-black focus:border-blue-700"}))})},h=function(e){var t=e.checkoutToken,s=e.next,c=(0,i.useState)([]),o=(0,a.Z)(c,2),h=o[0],f=o[1],j=(0,i.useState)(""),b=(0,a.Z)(j,2),g=b[0],v=b[1],y=(0,i.useState)([]),N=(0,a.Z)(y,2),Z=N[0],k=N[1],S=(0,i.useState)(""),w=(0,a.Z)(S,2),_=w[0],C=w[1],T=(0,i.useState)([]),E=(0,a.Z)(T,2),O=E[0],q=E[1],P=(0,i.useState)(""),z=(0,a.Z)(P,2),B=z[0],A=z[1],D=(0,m.cI)(),F=D.formState.errors,M=Object.entries(h).map((function(e){var t=(0,a.Z)(e,2);return{id:t[0],label:t[1]}})),U=Object.entries(Z).map((function(e){var t=(0,a.Z)(e,2);return{id:t[0],label:t[1]}})),R=O.map((function(e){var t=e.price.formatted_with_symbol;return{id:e.id,label:"".concat(e.description," - (").concat(t,")")}})),$=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var s,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.B.services.localeListShippingCountries(t);case 2:s=e.sent,n=s.countries,f(n),v(Object.keys(n)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var s,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.B.services.localeListSubdivisions(t);case 2:s=e.sent,n=s.subdivisions,k(n),C(Object.keys(n)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,s){var n,a,i=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,e.next=3,u.B.checkout.getShippingOptions(t,{country:s,region:n});case 3:a=e.sent,q(a),A(a[0].id);case 6:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){$(t.id)}),[t.id]),(0,i.useEffect)((function(){g&&L(g)}),[g]),(0,i.useEffect)((function(){_&&V(t.id,g,_)}),[_]),(0,p.jsxs)("div",{className:"px-8",children:[(0,p.jsx)("h3",{className:"mb-8 text-xl text-gray-800",children:"Shipping Address"}),(0,p.jsx)(m.RV,(0,d.Z)((0,d.Z)({},D),{},{children:(0,p.jsxs)("form",{onSubmit:D.handleSubmit((function(e){return s((0,d.Z)((0,d.Z)({},e),{},{shippingCountry:g,shippingSubdivision:_,shippingOption:B,shippingSubdivisions:Z,shippingOptions:O}))})),children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 gap-y-10 gap-x-8 mb-6 sm:grid-cols-2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"First name",registeredText:"firstName",required:"Enter your firstname",value:/^[A-Za-z]+$/,message:"Name should not contain numbers"}),F.firstName&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.firstName.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"Last name",registeredText:"lastName",required:"Enter your lastname",value:/^[A-Za-z]+$/,message:"Name should not contain numbers"}),F.lastName&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.lastName.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"Address",registeredText:"address",required:"Enter your email address"}),F.address&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.address.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"E-mail",registeredText:"email",required:"Enter your e-mail",value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Enter a valid e-mail address"}),F.email&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.email.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"City",registeredText:"city",required:"Enter your city",value:/^[A-Za-z]+$/,message:"City should not contain numbers"}),F.city&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.city.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{placeholder:"ZIP/Postal Code",registeredText:"zip",required:"Enter your zip/postal code",value:/^[0-9]+$/,message:"Zip/Postal code should not contain letters"}),F.zip&&(0,p.jsx)("span",{className:"text-red-500 text-sm",children:F.zip.message})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-8 sm:grid-cols-2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-gray-500",children:"Shipping Country"}),(0,p.jsx)("select",{value:g,onChange:function(e){return v(e.target.value)},required:!0,className:"select",children:M.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-gray-500",children:"Shipping Subdivisions"}),(0,p.jsx)("select",{value:_,onChange:function(e){return C(e.target.value)},required:!0,className:"select",children:U.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-gray-500",children:"Shipping Options"}),(0,p.jsx)("select",{value:B,onChange:function(e){return A(e.target.value)},required:!0,className:"select",children:R.map((function(e){return(0,p.jsx)("option",{value:e.id,children:e.label},e.id)}))})]})]}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{className:"mb-4 text-sm font-bold",children:[(0,p.jsx)("p",{children:"Please ensure that information provided is correct as wrong information will result in an incomplete transaction."}),(0,p.jsx)("p",{children:"Note: Shipping Options for the United States is Domestic."})]}),(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)(l.rU,{to:"/cart",className:"px-4 py-2 uppercase border rounded transition-colors outline-blue-900 hover:bg-gray-100",children:"Back to cart"}),(0,p.jsx)("button",{type:"submit",className:"checkout-btn px-5 py-2 uppercase",children:"Next"})]})]})}))]})},f=s(5764),j=s(3473),b=function(e){var t=e.checkoutToken,s=t.line_items,r=t.subtotal.formatted_with_symbol;return(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"mb-8 text-xl text-gray-800",children:"Order Summary"}),(0,p.jsxs)("ul",{className:"mb-4",children:[s.map((function(e){var t=e.line_total.formatted_with_symbol;return(0,p.jsxs)("li",{className:"flex justify-between items-center mb-8",children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("span",{className:"font-semibold text-gray-700",children:e.name}),(0,p.jsxs)("span",{className:"text-gray-600 text-sm",children:["Quantity: ",e.quantity]})]}),(0,p.jsx)("span",{children:t})]},e.id)})),(0,p.jsxs)("li",{className:"flex justify-between",children:[(0,p.jsx)("span",{className:"font-semibold text-gray-700",children:"Total"}),(0,p.jsx)("span",{className:"font-bold text-lg",children:r})]})]})]})},g=s(9815),v=(0,j.J)("pk_test_51Lqur0EFniT7m1rEUwHrFOaqQBrsY476on46aRTaJFT98nZmPclFnR6rOtfU5KPrVeGXdmRYvmXOClY9MzPv72BA00xkMBfdHh"),y=function(e){var t=e.checkoutToken,s=e.shippingData,a=e.backStep,c=e.nextStep,l=(0,i.useContext)(g.Z),o=t.line_items,u=t.subtotal.formatted_with_symbol,d=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(n,a,i){var u,d,m,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a&&i){e.next=3;break}return e.abrupt("return");case 3:return u=i.getElement(f.CardElement),e.next=6,a.createPaymentMethod({type:"card",card:u});case 6:d=e.sent,m=d.paymentMethod,p={line_items:o,customer:{firstname:s.firstName,lastname:s.lastName,email:s.email},shipping:{name:"Primary",street:s.address,town_city:s.city,county_state:s.shippingSubdivision,postal_zip_code:s.zip,country:s.shippingCountry},fulfillment:{shipping_method:s.shippingOption},payment:{gateway:"stripe",stripe:{payment_method_id:m.id}}},l.captureCheckoutHandler(t.id,p),c();case 11:case"end":return e.stop()}}),e)})));return function(t,s,r){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"px-8",children:[(0,p.jsx)(b,{checkoutToken:t}),(0,p.jsx)("hr",{}),(0,p.jsx)("h3",{className:"mb-4 mt-4 text-xl text-gray-800",children:"Payment method"}),(0,p.jsx)(f.Elements,{stripe:v,children:(0,p.jsx)(f.ElementsConsumer,{children:function(e){var t=e.stripe,s=e.elements;return(0,p.jsxs)("form",{onSubmit:function(e){return d(e,t,s)},children:[(0,p.jsxs)("p",{className:"mb-8 text-sm",children:["Type ",(0,p.jsx)("span",{className:"font-bold",children:"424242..."})," consistently as the test numbers for the card details below"]}),(0,p.jsx)(f.CardElement,{}),(0,p.jsx)("br",{})," ",(0,p.jsx)("br",{}),(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("button",{onClick:a,className:"px-4 py-2 uppercase border rounded transition-colors outline-blue-900 hover:bg-gray-100",children:"Back"}),(0,p.jsxs)("button",{disabled:!t,className:"checkout-btn px-5 py-2 uppercase",children:["Pay ",u]})]})]})}})})]})},N=s(1244),Z=["Shipping address","Payment details"],k=function(){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),s=t[0],d=t[1],m=(0,i.useState)(null),x=(0,a.Z)(m,2),f=x[0],j=x[1],b=(0,i.useState)({}),v=(0,a.Z)(b,2),k=v[0],S=v[1],w=(0,i.useState)(null),_=(0,a.Z)(w,2),C=_[0],T=_[1],E=(0,i.useState)(""),O=(0,a.Z)(E,2),q=O[0],P=O[1],z=(0,c.s0)(),B=(0,i.useContext)(g.Z);(0,i.useEffect)((function(){var e=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,B.cart.id){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.B.checkout.generateToken(B.cart.id,{type:"cart"});case 5:t=e.sent,j(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),P("Redirecting to cart..."),T(setTimeout((function(){z("/cart",{replace:!0})}),5e3));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[B.cart.id,z]);var A=function(){return d((function(e){return e+1}))},D=function(){return d((function(e){return e-1}))},F=function(e){S(e),A()},M=function(){return B.order.customer?(0,p.jsxs)("div",{className:"px-8",children:[(0,p.jsxs)("h5",{className:"mb-4 text-lg",children:["Thank you for your purchase, ",B.order.customer.firstname," ",B.order.customer.lastname,". Please check the spam folder in your mail for your receipt."]}),(0,p.jsx)("hr",{}),(0,p.jsxs)("p",{className:"mt-4",children:["Order ref: ",B.order.customer_reference]}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)(l.rU,{reloadDocument:!0,to:"/cart",onClick:function(){return clearTimeout(C)},className:"px-4 py-2 uppercase border rounded transition-colors outline-blue-900 hover:bg-gray-100",children:"Back to Cart"}),(0,p.jsx)("p",{children:q})]})]}):(0,p.jsx)(N.Z,{})};B.errorMessage&&(M=function(){return(0,p.jsxs)("div",{className:"px-8",children:[(0,p.jsxs)("h5",{children:["Error: ",B.errorMessage]}),(0,p.jsx)("br",{}),(0,p.jsx)(l.rU,{reloadDocument:!0,to:"/cart",className:"px-4 py-2 uppercase border rounded transition-colors outline-blue-900 hover:bg-gray-100",children:"Back to Cart"})]})});var U=function(){return 0===s?(0,p.jsx)(h,{checkoutToken:f,next:F}):(0,p.jsx)(y,{checkoutToken:f,shippingData:k,backStep:D,nextStep:A})};return(0,p.jsx)("div",{className:"container mx-auto max-w-2xl my-16 mb-20 px-4 font-lora",children:(0,p.jsxs)("div",{className:"bg-white py-6 rounded shadow-md",children:[(0,p.jsx)("h2",{className:"text-4xl text-center mb-4",children:"Checkout"}),(0,p.jsx)("div",{className:"flex justify-between mb-8",children:Z.map((function(e,t){return(0,p.jsxs)("div",{className:"text-gray-400 step-item ".concat((s===t||t<s)&&"active"),children:[(0,p.jsx)("div",{className:"step",children:t<s?(0,p.jsx)(o.jbV,{size:24}):t+1}),(0,p.jsx)("p",{className:"".concat((s===t||t<s)&&"text-gray-800"),children:e})]},t)}))}),s===Z.length?(0,p.jsx)(M,{}):f?(0,p.jsx)(U,{}):(0,p.jsx)(N.Z,{})]})})},S=function(){return(0,p.jsx)(k,{})}}}]);
//# sourceMappingURL=42.2416753a.chunk.js.map